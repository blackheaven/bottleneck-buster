<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.34.0 (20131224.2158)
 -->
<!-- Title: 2PC Clean Pages: 1 -->
<svg width="661pt" height="484pt"
 viewBox="0.00 0.00 661.00 484.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 480)">
<title>2PC Clean</title>
<polygon fill="white" stroke="white" points="-4,4 -4,-480 657,-480 657,4 -4,4"/>
<!-- b1 -->
<g id="node1" class="node"><title>b1</title>
<ellipse fill="none" stroke="black" cx="253" cy="-370" rx="36.096" ry="18"/>
<text text-anchor="middle" x="253" y="-366.3" font-family="Times,serif" font-size="14.00">Bank 1</text>
</g>
<!-- c -->
<g id="node5" class="node"><title>c</title>
<ellipse fill="none" stroke="black" cx="379" cy="-282" rx="55.3682" ry="18"/>
<text text-anchor="middle" x="379" y="-278.3" font-family="Times,serif" font-size="14.00">Coordinator</text>
</g>
<!-- b1&#45;&gt;c -->
<g id="edge1" class="edge"><title>b1&#45;&gt;c</title>
<path fill="none" stroke="black" d="M288.057,-364.609C310.192,-360.2 338.079,-351.419 357,-334 364.01,-327.546 368.886,-318.477 372.231,-309.772"/>
<polygon fill="black" stroke="black" points="375.561,-310.851 375.39,-300.257 368.917,-308.645 375.561,-310.851"/>
<text text-anchor="middle" x="390.5" y="-322.3" font-family="Times,serif" font-size="14.00">register</text>
</g>
<!-- b1&#45;&gt;c -->
<g id="edge10" class="edge"><title>b1&#45;&gt;c</title>
<path fill="none" stroke="black" d="M288.704,-366.455C331.755,-362.558 400.31,-353.417 416,-334 423.378,-324.87 418.069,-314.432 409.413,-305.388"/>
<polygon fill="black" stroke="black" points="411.654,-302.694 401.931,-298.485 406.907,-307.839 411.654,-302.694"/>
<text text-anchor="middle" x="487.5" y="-322.3" font-family="Times,serif" font-size="14.00">3. Transfer Client 1 &#45;&gt; 2</text>
</g>
<!-- t -->
<g id="node6" class="node"><title>t</title>
<ellipse fill="none" stroke="black" cx="224" cy="-106" rx="54.3924" ry="18"/>
<text text-anchor="middle" x="224" y="-102.3" font-family="Times,serif" font-size="14.00">Transaction</text>
</g>
<!-- b1&#45;&gt;t -->
<g id="edge9" class="edge"><title>b1&#45;&gt;t</title>
<path fill="none" stroke="black" d="M246.346,-352.133C244.34,-346.451 242.322,-340.023 241,-334 225.448,-263.158 223.457,-177.225 223.577,-134.246"/>
<polygon fill="black" stroke="black" points="227.078,-134.062 223.648,-124.037 220.078,-134.013 227.078,-134.062"/>
<text text-anchor="middle" x="291" y="-234.3" font-family="Times,serif" font-size="14.00">2. Client 1 is in Bank 1</text>
</g>
<!-- a1 -->
<g id="node7" class="node"><title>a1</title>
<ellipse fill="none" stroke="black" cx="228" cy="-18" rx="48.6179" ry="18"/>
<text text-anchor="middle" x="228" y="-14.3" font-family="Times,serif" font-size="14.00">Account 1</text>
</g>
<!-- b1&#45;&gt;a1 -->
<g id="edge5" class="edge"><title>b1&#45;&gt;a1</title>
<path fill="none" stroke="black" d="M288.965,-367.506C359.051,-364.168 511.231,-354.716 559,-334 591.109,-320.075 619,-317.998 619,-283 619,-283 619,-283 619,-149 619,-83.0468 567.185,-75.9749 505,-54 465.713,-40.1166 354.262,-29.0952 285.295,-23.3533"/>
<polygon fill="black" stroke="black" points="285.277,-19.8402 275.025,-22.5111 284.705,-26.8168 285.277,-19.8402"/>
<text text-anchor="middle" x="636" y="-190.3" font-family="Times,serif" font-size="14.00">create</text>
</g>
<!-- b2 -->
<g id="node2" class="node"><title>b2</title>
<ellipse fill="none" stroke="black" cx="495" cy="-194" rx="36.096" ry="18"/>
<text text-anchor="middle" x="495" y="-190.3" font-family="Times,serif" font-size="14.00">Bank 2</text>
</g>
<!-- b2&#45;&gt;c -->
<g id="edge2" class="edge"><title>b2&#45;&gt;c</title>
<path fill="none" stroke="black" d="M491.296,-212.157C488.121,-223.137 482.506,-236.965 473,-246 462.334,-256.137 448.468,-263.396 434.676,-268.571"/>
<polygon fill="black" stroke="black" points="433.502,-265.274 425.18,-271.831 435.775,-271.894 433.502,-265.274"/>
<text text-anchor="middle" x="506.5" y="-234.3" font-family="Times,serif" font-size="14.00">register</text>
</g>
<!-- b2&#45;&gt;t -->
<g id="edge13" class="edge"><title>b2&#45;&gt;t</title>
<path fill="none" stroke="black" d="M465.223,-183.55C418.528,-168.732 327.648,-139.892 271.744,-122.151"/>
<polygon fill="black" stroke="black" points="272.66,-118.77 262.069,-119.081 270.542,-125.442 272.66,-118.77"/>
<text text-anchor="middle" x="447" y="-146.3" font-family="Times,serif" font-size="14.00">6. Client 2 is in Bank 2</text>
</g>
<!-- a2 -->
<g id="node8" class="node"><title>a2</title>
<ellipse fill="none" stroke="black" cx="473" cy="-18" rx="48.6179" ry="18"/>
<text text-anchor="middle" x="473" y="-14.3" font-family="Times,serif" font-size="14.00">Account 2</text>
</g>
<!-- b2&#45;&gt;a2 -->
<g id="edge6" class="edge"><title>b2&#45;&gt;a2</title>
<path fill="none" stroke="black" d="M506.074,-176.613C509.286,-170.963 512.366,-164.433 514,-158 521.015,-130.373 531.062,-112.158 505,-54 503.22,-50.0273 500.81,-46.2026 498.106,-42.6341"/>
<polygon fill="black" stroke="black" points="500.584,-40.1464 491.423,-34.824 495.265,-44.6975 500.584,-40.1464"/>
<text text-anchor="middle" x="539" y="-102.3" font-family="Times,serif" font-size="14.00">create</text>
</g>
<!-- c1 -->
<g id="node3" class="node"><title>c1</title>
<ellipse fill="none" stroke="black" cx="71" cy="-458" rx="39.4691" ry="18"/>
<text text-anchor="middle" x="71" y="-454.3" font-family="Times,serif" font-size="14.00">Client 1</text>
</g>
<!-- c1&#45;&gt;b1 -->
<g id="edge3" class="edge"><title>c1&#45;&gt;b1</title>
<path fill="none" stroke="black" d="M97.4644,-444.495C129.365,-429.421 183.067,-404.045 218.272,-387.41"/>
<polygon fill="black" stroke="black" points="220.131,-390.403 227.677,-382.966 217.14,-384.074 220.131,-390.403"/>
<text text-anchor="middle" x="200.5" y="-410.3" font-family="Times,serif" font-size="14.00">register</text>
</g>
<!-- c1&#45;&gt;t -->
<g id="edge7" class="edge"><title>c1&#45;&gt;t</title>
<path fill="none" stroke="black" d="M48.5352,-442.858C27.7344,-427.827 0,-401.978 0,-371 0,-371 0,-371 0,-193 0,-157.241 100.749,-130.765 167.112,-117.204"/>
<polygon fill="black" stroke="black" points="167.923,-120.612 177.042,-115.218 166.55,-113.747 167.923,-120.612"/>
<text text-anchor="middle" x="17" y="-278.3" font-family="Times,serif" font-size="14.00">create</text>
</g>
<!-- c2 -->
<g id="node4" class="node"><title>c2</title>
<ellipse fill="none" stroke="black" cx="551" cy="-282" rx="39.4691" ry="18"/>
<text text-anchor="middle" x="551" y="-278.3" font-family="Times,serif" font-size="14.00">Client 2</text>
</g>
<!-- c2&#45;&gt;b2 -->
<g id="edge4" class="edge"><title>c2&#45;&gt;b2</title>
<path fill="none" stroke="black" d="M549.806,-263.833C548.418,-253.383 545.428,-240.141 539,-230 535.433,-224.373 530.641,-219.259 525.53,-214.784"/>
<polygon fill="black" stroke="black" points="527.373,-211.778 517.367,-208.296 523.018,-217.258 527.373,-211.778"/>
<text text-anchor="middle" x="566.5" y="-234.3" font-family="Times,serif" font-size="14.00">register</text>
</g>
<!-- c&#45;&gt;b1 -->
<g id="edge11" class="edge"><title>c&#45;&gt;b1</title>
<path fill="none" stroke="black" d="M329.622,-290.099C297.524,-295.839 259.868,-305.097 250,-318 244.79,-324.812 243.944,-333.753 244.908,-342.244"/>
<polygon fill="black" stroke="black" points="241.496,-343.038 246.81,-352.203 248.372,-341.724 241.496,-343.038"/>
<text text-anchor="middle" x="301.5" y="-322.3" font-family="Times,serif" font-size="14.00">4. whereis Client 2</text>
</g>
<!-- c&#45;&gt;b2 -->
<g id="edge12" class="edge"><title>c&#45;&gt;b2</title>
<path fill="none" stroke="black" d="M367.889,-263.918C362.472,-253.243 358.562,-239.725 366,-230 376.381,-216.428 417.507,-206.888 450.57,-201.233"/>
<polygon fill="black" stroke="black" points="451.226,-204.673 460.53,-199.603 450.095,-197.765 451.226,-204.673"/>
<text text-anchor="middle" x="417.5" y="-234.3" font-family="Times,serif" font-size="14.00">5. whereis Client 2</text>
</g>
<!-- t&#45;&gt;b1 -->
<g id="edge8" class="edge"><title>t&#45;&gt;b1</title>
<path fill="none" stroke="black" d="M186.648,-119.128C129.508,-139.873 30.2713,-185.824 63,-246 94.7466,-304.37 167.449,-339.294 213.152,-356.279"/>
<polygon fill="black" stroke="black" points="212.155,-359.64 222.75,-359.731 214.524,-353.053 212.155,-359.64"/>
<text text-anchor="middle" x="130.5" y="-234.3" font-family="Times,serif" font-size="14.00">1. Transfer Client 1 &#45;&gt; 2</text>
</g>
<!-- t&#45;&gt;a1 -->
<g id="edge14" class="edge"><title>t&#45;&gt;a1</title>
<path fill="none" stroke="black" d="M169.974,-103.761C113.975,-101.2 31.8804,-93.4316 12,-70 7.39941,-64.5776 7.39134,-59.4155 12,-54 31.875,-30.6453 112.593,-22.8277 169.506,-20.2389"/>
<polygon fill="black" stroke="black" points="169.988,-23.7221 179.836,-19.8138 169.7,-16.728 169.988,-23.7221"/>
<text text-anchor="middle" x="73" y="-58.3" font-family="Times,serif" font-size="14.00">7. has enough money?</text>
</g>
<!-- t&#45;&gt;a1 -->
<g id="edge16" class="edge"><title>t&#45;&gt;a1</title>
<path fill="none" stroke="black" d="M194.097,-90.8932C178.854,-81.5956 165.046,-68.4891 173,-54 176.595,-47.4518 181.991,-41.9537 188.022,-37.3994"/>
<polygon fill="black" stroke="black" points="190.126,-40.2045 196.529,-31.7641 186.26,-34.3687 190.126,-40.2045"/>
<text text-anchor="middle" x="197.5" y="-58.3" font-family="Times,serif" font-size="14.00">9. Minus</text>
</g>
<!-- t&#45;&gt;a2 -->
<g id="edge17" class="edge"><title>t&#45;&gt;a2</title>
<path fill="none" stroke="black" d="M277.42,-102.652C335.82,-99.0828 424.622,-90.399 451,-70 458.648,-64.0854 463.68,-54.9805 466.972,-46.0916"/>
<polygon fill="black" stroke="black" points="470.38,-46.917 469.996,-36.3291 463.694,-44.8458 470.38,-46.917"/>
<text text-anchor="middle" x="482.5" y="-58.3" font-family="Times,serif" font-size="14.00">9. Plus</text>
</g>
<!-- t&#45;&gt;a2 -->
<g id="edge19" class="edge"><title>t&#45;&gt;a2</title>
<path fill="none" stroke="black" d="M263.083,-93.4189C283.754,-87.022 309.453,-78.6367 332,-70 348.351,-63.7369 351.676,-60.3313 368,-54 387.134,-46.5789 408.579,-39.2579 427.076,-33.2452"/>
<polygon fill="black" stroke="black" points="428.286,-36.5327 436.732,-30.1372 426.141,-29.8693 428.286,-36.5327"/>
<text text-anchor="middle" x="407.5" y="-58.3" font-family="Times,serif" font-size="14.00">(11.) Rollback</text>
</g>
<!-- a1&#45;&gt;t -->
<g id="edge15" class="edge"><title>a1&#45;&gt;t</title>
<path fill="none" stroke="black" d="M227.205,-36.084C226.658,-47.8607 225.917,-63.7741 225.286,-77.342"/>
<polygon fill="black" stroke="black" points="221.778,-77.4448 224.809,-87.5966 228.77,-77.7701 221.778,-77.4448"/>
<text text-anchor="middle" x="242.5" y="-58.3" font-family="Times,serif" font-size="14.00">8. yes</text>
</g>
<!-- a1&#45;&gt;t -->
<g id="edge18" class="edge"><title>a1&#45;&gt;t</title>
<path fill="none" stroke="black" d="M247.468,-34.8055C256.954,-44.5267 265.288,-57.4827 260,-70 258.196,-74.2708 255.587,-78.2778 252.586,-81.9462"/>
<polygon fill="black" stroke="black" points="249.865,-79.7304 245.551,-89.4071 254.958,-84.5329 249.865,-79.7304"/>
<text text-anchor="middle" x="295" y="-58.3" font-family="Times,serif" font-size="14.00">10. ok/error</text>
</g>
</g>
</svg>
